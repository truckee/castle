<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-6PS5NHPVCX"></script>

        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6PS5NHPVCX');
        </script>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Castle Rock HOA - Archives</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="../assets/css/hoa.css">
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body style="
        background-image: url('../assets/images/reno-from-arrowcreek.jpg');
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed; 
        background-size: cover; 
    ">
        <div class="container">
        <div id="menu"></div>
        <div id="placeholder"></div>
        </div>
        <script src="../assets/js/menu.js"></script>
        <script>
            $('td').on('click', function (e) {
                var filename = $(e.currentTarget).text();
                var url = document.location.origin + "/governance/agendas/" + filename;
                fetch(url, {
                    mode: 'no-cors'
                }).then((transfer) => {
                    return transfer.blob();                 // RETURN DATA TRANSFERED AS BLOB
                }).then((bytes) => {
                    let elm = document.createElement('a');  // CREATE A LINK ELEMENT IN DOM
                    elm.href = URL.createObjectURL(bytes);  // SET LINK ELEMENTS CONTENTS
                    elm.setAttribute('download', filename); // SET ELEMENT CREATED 'ATTRIBUTE' TO DOWNLOAD, FILENAME PARAM AUTOMATICALLY
                    elm.click();                            // TRIGGER ELEMENT TO DOWNLOAD
                }).catch((error) => {
                    console.log(error);                     // OUTPUT ERRORS, SUCH AS CORS WHEN TESTING NON LOCALLY
                })
            });
        </script>
    </body>
</html>
