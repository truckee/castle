<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-6PS5NHPVCX"></script>

        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6PS5NHPVCX');
        </script>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Castle Rock HOA - Archives</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="../assets/css/hoa.css">
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body style="
        background-image: url('../assets/images/reno-from-arrowcreek.jpg');
        background-position: center center;
        background-repeat: no-repeat;
        background-attachment: fixed; 
        background-size: cover; 
    ">
        <div class="container">
        <div id="nav-placeholder"></div>
        <div class="row mt-5">
            <div class="col-2"></div>
            <div class="col-8 bg-light opacity-75  rounded-3">
                <h4 class="text-center">Archives</h4>
                Each of the archive ('.zip') files below contain the available 
                agenda and minutes PDF files for that calendar year. The filenames 
                include the date of the meeting's agenda and minutes. Dates have the 
                format yyyy-mm-dd. For example, the filename fo the agenda for  May 26, 2022 
                begins "agenda-2022-05-26...". Filenames with the date followed by a B 
                (e.g., "agenda-2022-05-26-B...") are for Board meetings, or M for Member
                meetings.
            </div>
        </div>
        <div class="row mt-5">
            <div class="col-5"></div>
            <div class="col-2 bg-light opacity-75  rounded-3">
                <h5 class="text-center">Archive files</h5>
                <div class="overflow-auto" style="height: 300px;">
                    <table class="table">
                        <tr>
                            <td class="archive">2024.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2023.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2022.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2021.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2020.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2019.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2018.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2017.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2016.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2015.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2014.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2013.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2012.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2011.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2010.zip</td>
                        </tr>
                        <tr>
                            <td class="archive">2009.zip</td>
                        </tr>

                    </table>
                </div>
            </div>
        </div>
        </div>
        <script src="../assets/js/menu.js"></script>
        <script>
            $('td').on('click', function (e) {
                var filename = $(e.currentTarget).text();
                var url = document.location.origin + "/governance/agendas/" + filename;
                fetch(url, {
                    mode: 'no-cors'
                }).then((transfer) => {
                    return transfer.blob();                 // RETURN DATA TRANSFERED AS BLOB
                }).then((bytes) => {
                    let elm = document.createElement('a');  // CREATE A LINK ELEMENT IN DOM
                    elm.href = URL.createObjectURL(bytes);  // SET LINK ELEMENTS CONTENTS
                    elm.setAttribute('download', filename); // SET ELEMENT CREATED 'ATTRIBUTE' TO DOWNLOAD, FILENAME PARAM AUTOMATICALLY
                    elm.click();                            // TRIGGER ELEMENT TO DOWNLOAD
                }).catch((error) => {
                    console.log(error);                     // OUTPUT ERRORS, SUCH AS CORS WHEN TESTING NON LOCALLY
                })
            });
        </script>
    </body>
</html>
